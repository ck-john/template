<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <style>
        body, div, dl, dt, dd, ul, ol, li, h1, h2, h3, h4, h5, h6, pre, code, form, fieldset, legend, input, textarea, p, blockquote, th, td {
            margin: 0;
            padding: 0
        }

    </style>
</head>
<body>
<canvas id="canvas" width="900" height="600" style="border: 1px solid #000;"></canvas>
<button dir="2">上</button>
<button dir="6">下</button>
<button dir="0">左</button>
<button dir="4">右</button>

<script>
var canvas=document.getElementById("canvas");
var ctx=canvas.getContext("2d");

var girl= new Girl({
    imgSrc:"images/girl.png",
    clipW:256,
    clipH:256,
    x:200,
    y:200,
    width:256,
    height:256,
    time:400,
    dir:0
});
girl.render();
var buttons = document.getElementsByTagName('button');

for (var i = 0; i < buttons.length; i++) {

    buttons[i].onclick = function () {
        // 改变方向
        girl.changeDir(this.getAttribute('dir'));
    }
};
//function Girl(option) {
//    this._init(option)
//};
//
//Girl.prototype={
//    constructor:Girl,
//    _init:function (option) {
//        option=option||{};
//        this.src=option.src;
//        this.clipW=option.clipW;
//        this.clipH=option.clipH;
//        this.x=option.x;
//        this.y=option.y;
//        this.width=option.width;
//        this.height=option.height;
//        this.time=option.time;
//        this.dir=option.dir;
//
//    },
//    render:function () {
//
//
//        var self=this;
//        var image=new Image();
//        image.src=this.src;
//        var index=0;
//        image.onload=function () {
//
//            setInterval(function () {
//                ctx.clearRect(self.x,self.y,self.width,self.height);
//                ctx.drawImage(image,index*self.clipW,dir*self.clipH,self.width,self.height,self.x,self.y,self.width,self.height);
//                index++;
//                index%=8;
//            },self.time)
//
//        }
//    },
//    changeDir:function (dir) {
//        this.dir=dir;
//    }
//}

    function Girl(option) {
        this._init(option)
    }
    Girl.prototype={
        constructor:Girl,
        _init:function (option) {
            option=option||{};
            this.imgSrc=option.imgSrc;
            this.clipW=option.clipW;
            this.clipH=option.clipH;
            this.x=option.x;
            this.y=option.y;
            this.width=option.width;
            this.height=option.height;
            this.time=option.time;
            this.dir=option.dir;
        },
        render:function () {
            var image=new Image()
            image.src=this.imgSrc;
            var self=this;
            var index=0
            var dir=0
            image.onload=function () {
                setInterval(function () {
                    ctx.clearRect(0,0,canvas.width,canvas.height);
                    ctx.drawImage(image,index*self.clipW,self.dir*self.clipH,self.clipW,self.clipH,self.x,self.y,self.width,self.height)
                    index++;
                    index%=8;
                },self.time)
            }
        },
        changeDir : function (dir) {
            this.dir = dir;
        }

            }




</script>
</body>

</html>